<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floratta Flowers - Cafeteria</title>
    <link rel="icon" type="image/png" href="icontransp.png">
    
    <!-- Ícones e Fontes -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/hero.css">
    <link rel="stylesheet" href="css/products.css">
    <link rel="stylesheet" href="css/cart.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/mascote.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo"><a href="index.html"><img src="logo.png" alt="Floratta Flowers" class="logo-img"></a></div>
            <nav>
                <div class="dropdown">
                    <a href="index.html#floricultura" class="dropdown-toggle nav-link">
                        FLORES <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu" id="floricultura-menu">
                        <!-- Categorias de floricultura carregadas aqui -->
                    </div>
                </div>
                <div class="dropdown">
                    <a href="#cafeteria" class="dropdown-toggle nav-link">
                        CAFETERIA <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu" id="cafeteria-menu">
                        <!-- Categorias de cafeteria carregadas aqui -->
                    </div>
                </div>
                <a href="sobre.html" class="nav-link">SOBRE NÓS</a>
                <a href="contato.html" class="nav-link">CONTATO</a>
            </nav>
            <a href="admin.html" class="admin-link" aria-label="Admin Login"><i class="fas fa-spa"></i></a>
        </div>
    </header>

    <section class="products" id="cafeteria">
        <h2 id="cafeteria-main-title">CAFETERIA</h2>
        <div class="products-grid" id="cafeteriaGrid">
            <!-- Cafeteria products will be loaded here -->
        </div>
    </section>

    <div class="cart" onclick="showDeliveryModal()">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count">0</span>
    </div>

    <div class="delivery-modal" id="deliveryModal">
        <div class="modal-content">
            <span class="close-modal-btn" onclick="closeDeliveryModal()">&times;</span>
            <h2>Seu Carrinho</h2>
            <div id="cartItemsList">
                <!-- Itens do carrinho serão listados aqui -->
            </div>
            <div class="cart-summary">
                <div class="subtotal">
                    Subtotal: <span id="modalCartSubtotal">R$ 0,00</span>
                </div>
                <div class="frete-value">
                    Frete: <span id="modalFreteValue">R$ 0,00</span>
                </div>
                <div class="cart-total">
                    Total: <span id="modalCartTotal">R$ 0,00</span>
                </div>
            </div>
            <h2>Dados para Entrega</h2>
            <form id="deliveryForm">
                <div class="form-group">
                    <label for="name">Nome Completo</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">Telefone</label>
                    <input type="tel" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="street">Rua</label>
                    <input type="text" id="street" required>
                </div>
                <div class="form-row">
                    <div class="form-group" style="flex: 2;">
                        <label for="number">Número</label>
                        <input type="text" id="number" required>
                    </div>
                    <div class="form-group" style="flex: 3;">
                        <label for="neighborhood">Bairro</label>
                        <input type="text" id="neighborhood" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="deliveryArea">Área de Entrega</label>
                    <select id="deliveryArea" required onchange="updateFrete()">
                        <option value="">Selecione o bairro para calcular o frete</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="complement">Complemento (opcional)</label>
                    <input type="text" id="complement" placeholder="Apartamento, bloco, etc.">
                </div>
                <div class="form-group">
                    <label for="giftMessage">Mensagem para Presente (opcional)</label>
                    <textarea id="giftMessage" placeholder="Escreva sua mensagem aqui..."></textarea>
                </div>
                <div class="form-group">
                    <label for="payment">Forma de Pagamento</label>
                    <select id="payment" required>
                        <option value="">Selecione a forma de pagamento</option>
                        <option value="dinheiro">Dinheiro</option>
                        <option value="pix">PIX</option>
                        <option value="credito">Cartão de Crédito</option>
                        <option value="debito">Cartão de Débito</option>
                        <option value="transferencia">Transferência Bancária</option>
                    </select>
                </div>
                <div class="form-group" id="trocoGroup" style="display: none;">
                    <label for="troco">Troco para quanto?</label>
                    <input type="text" id="troco" placeholder="Ex: 50,00">
                </div>
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeDeliveryModal()">Cancelar</button>
                    <button type="submit" class="confirm-btn">Confirmar Pedido</button>
                </div>
            </form>
        </div>
    </div>

    <!-- The Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="close-image-modal">&times;</span>
        <img class="modal-image-content" id="modalImage">
        <div id="caption"></div>
    </div>

    <!-- Footer do Desenvolvedor -->
    <footer class="developer-footer">
        <p>Desenvolvido por <strong>CostaBecker Soluções em Tecnologia LTDA</strong> | 
        <a href="https://instagram.com/beckersolucoestech" target="_blank">@beckersolucoestech</a></p>
        
        <!-- Admin Link Mobile -->
        <a href="admin.html" class="admin-link-mobile" aria-label="Admin Login">
            <i class="fas fa-spa"></i>
        </a>
    </footer>

    <!-- Mascote e Balão de Fala -->
    <div id="mascoteContainer" class="mascote-container">
        <img src="mascote.jpg" alt="Mascote Floratta" class="mascote-imagem">
        <div id="balaoFala" class="balao-fala">
            <p id="fraseDoMascote"></p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/main.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/products.js"></script>
    <script src="js/carousel.js"></script>

    <script>
        // A configuração do Supabase foi movida para js/main.js para evitar duplicidade
        // const supabaseUrl = '...';
        // const supabaseKey = '...';
        // const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        async function carregarFraseMascote() {
            try {
                // Usa a constante supabaseClient definida em main.js
                const { data, error } = await supabaseClient
                    .from('configuracoes')
                    .select('frase_mascote')
                    .limit(1) // Pega a primeira configuração que encontrar
                    .single();

                if (error && error.code !== 'PGRST116') throw error; // Ignora erro se a tabela estiver vazia

                if (data && data.frase_mascote) {
                    document.getElementById('fraseDoMascote').textContent = data.frase_mascote;
                    
                    const balao = document.getElementById('balaoFala');
                    setTimeout(() => {
                        balao.classList.add('visivel');
                    }, 2000); // Aparece após 2 segundos

                    setTimeout(() => {
                        balao.classList.remove('visivel');
                    }, 8000); // Desaparece após 8 segundos (2s de espera + 6s de exibição)
                }
            } catch (error) {
                console.error('Erro ao carregar frase do mascote:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', carregarFraseMascote);

        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
        });

    </script>
</body>
</html> 
